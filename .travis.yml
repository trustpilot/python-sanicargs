sudo: required
addons:
  apt_packages:
  - pandoc
language: python
python:
- '3.6'
install:
- pip install pypandoc
- pip install .[test]
script:
- py.test
branches:
  only: master
after_success:
- git config --global user.email "travis@travis-ci.org"
- git config --global user.name "Travis"
- git tag -a v$(python setup.py --version) -m "Travis build $TRAVIS_BUILD_NUMBER pushed
  a tag."
- git push origin --tags
- git fetch origin

deploy:
  provider: releases
  api_key:
    secure: E9Q27QCUrW2qspYAhwy7kIwt+TENdr6yhBEIlTGd6s2QaF9KmBn7d7ouLQ+93sV/yISajArlagblPifZLm9mXnvs5BeIA7Dy/EbXgYN1b62iRpOqGCKZ4PaUino8fQXdKgcqWEovIC7PpER/h0g0o2nPULqHADohL2CsGeVXGekfRuvffnQrbcJcfsJtS3Px+u39OhU2s/o718U8XNShDT4OZgJBkn0V+1Toc3ZwBwsZs9bvLVC4keJHTKNwGwG1CyZOzdrp/TizZdrXtjpnA9Dk8jo2Fa1DPDGAnG8ORogz722RCou5PHVQiRnrbRPOuyhPYZe5R97NBi1omMuKXRneLyxUSqfz09nON4Jbah7qb3wtgUX7dSV1XdiBx/mB9bDiIc85RqW+FQJZqxvZU76JDrccPIricaHM05Md/HXtRYAFmcgmhRrwifW2++NRiosX66HocmdyIMQj9TNhIOAe8IeBVub011b++jlEzbN1xHEO26zGGHN9SHfNlj8nyWhojvU56pEv2w/0DSJyRiIbAdTet03u2uF1nEPYJEZB81sJjhrq1vY5aMibCRmElUzmo1RIrrE6a3vy5bFL6unYUFPmcO4hfWDj0TYpnfUkB73Vjjgv83eUM1MW2DoA4AgUk7dl1BE5kRXdO0a9FAqo9MBXNKRAeScdmC/rIkE=
  file: dist/*
  on:
    repo: trustpilot/python-sanicargs


deploy:
  - provider: pypi
    skip_cleanup: true
    distributions: sdist
    user: "trustpilot"
    password:
      secure: owvGC7uHg3vWP+HGI9eRjD1C2XdCKxK5KFhvDM+M5voaMoOgP5k/yJCbL9PbPRDgXIBKmB5P0jruyYmEYQJbqtheVCqDDhDoCPY9mymxuRjugZKLDqgFG6WDTYCUPZxvw0pUxn+dlf5QE2uNQa4hz3Ta5qaGzVmkqHampd0IxXeCDTTngMKS6z/IMtCnJTeE6NArhUVbWMi4s6apAhWVKaNFpDgEPcDC17CSkrzfTYGawQh0MUX1Pfyy9SD3wZH+zeBO31lVEQQccipfojbepEAAOe5HOfI8Ke6isZDo1LDsSS+Hrypj9aC1P6TVLpPUTI5KJhsGB3cJJkXuCnJD9w7k0M4KmzxYj3A0Daqpl9LDxcjNPJzHCAx2LKtYxpBFQcwRmNpBMxbVrfWhx8a4ZsuPj+LkZsZR3+UwpscKsp6pSGSbtsbA2aKuArfu/OBWGva8rLSSVAvwgxGn3t4Km4tsVOa2b2IVtq8XJuMs1sNoyzrM5ZSbjK+Zr1sYe5B9jojKqQLschfKR4EKXGiRWqzSRJgWMt0nzawZjqy8Mosw1NAbBUkmLkaegboPeqFudSpWRUp27HYusIQu4oZFMScx5/SFmOe+1xGHQ9IyxD9xJ8/2fH8KM6LTIlAvLQPLgos/TeUEKm0X9TFSlLGtotWIo93ZC7EL1DBZW6ChOBs=
    on:
      tags: false
      branch: master
      condition: $TRAVIS_PYTHON_VERSION = "3.6"
  - provider: releases
    skip_cleanup: true
    api-key:
      secure: E9Q27QCUrW2qspYAhwy7kIwt+TENdr6yhBEIlTGd6s2QaF9KmBn7d7ouLQ+93sV/yISajArlagblPifZLm9mXnvs5BeIA7Dy/EbXgYN1b62iRpOqGCKZ4PaUino8fQXdKgcqWEovIC7PpER/h0g0o2nPULqHADohL2CsGeVXGekfRuvffnQrbcJcfsJtS3Px+u39OhU2s/o718U8XNShDT4OZgJBkn0V+1Toc3ZwBwsZs9bvLVC4keJHTKNwGwG1CyZOzdrp/TizZdrXtjpnA9Dk8jo2Fa1DPDGAnG8ORogz722RCou5PHVQiRnrbRPOuyhPYZe5R97NBi1omMuKXRneLyxUSqfz09nON4Jbah7qb3wtgUX7dSV1XdiBx/mB9bDiIc85RqW+FQJZqxvZU76JDrccPIricaHM05Md/HXtRYAFmcgmhRrwifW2++NRiosX66HocmdyIMQj9TNhIOAe8IeBVub011b++jlEzbN1xHEO26zGGHN9SHfNlj8nyWhojvU56pEv2w/0DSJyRiIbAdTet03u2uF1nEPYJEZB81sJjhrq1vY5aMibCRmElUzmo1RIrrE6a3vy5bFL6unYUFPmcO4hfWDj0TYpnfUkB73Vjjgv83eUM1MW2DoA4AgUk7dl1BE5kRXdO0a9FAqo9MBXNKRAeScdmC/rIkE=
    file_glob: true
    file: dist/*
    on:
      tags: false
      branch: master
      condition: $TRAVIS_PYTHON_VERSION = "3.6"